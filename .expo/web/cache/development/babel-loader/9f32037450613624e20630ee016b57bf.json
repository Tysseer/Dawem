{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport * as qstrings from \"./QuranicAssistantStrings\";\nimport QuranicAssistantStrings from \"./QuranicAssistantStrings\";\nimport * as msgs from \"./Messages\";\nimport SearchTextParser from \"./SearchTextParser\";\nimport allAyat from \"./quranAyat\";\nvar QuranicAssistant = function () {\n  function QuranicAssistant() {\n    _classCallCheck(this, QuranicAssistant);\n    this.stringsManager = new QuranicAssistantStrings();\n    this.myLastMsg = -1;\n    this.userResponses = [];\n    this.assistantUser = null;\n    this.humanUser = null;\n    this.screen = null;\n    this.revToBeDivided = null;\n    this.queryParser = new SearchTextParser();\n  }\n  _createClass(QuranicAssistant, [{\n    key: \"addCustomTextMessage\",\n    value: function addCustomTextMessage(strMsg) {\n      this.screen.messageReady(new msgs.TextMessage(this.msgId++, this.assistantUser, strMsg));\n    }\n  }, {\n    key: \"addTextMessage\",\n    value: function addTextMessage(id) {\n      this.screen.messageReady(new msgs.TextMessage(this.msgId++, this.assistantUser, this.stringsManager.getStr(id)));\n      this.myLastMsg = id;\n    }\n  }, {\n    key: \"addUserTextMessage\",\n    value: function addUserTextMessage(id, strTxt) {\n      var msgTxt = id > 0 ? this.stringsManager.getStr(id) : strTxt;\n      this.screen.messageReady(new msgs.TextMessage(this.msgId++, this.humanUser, msgTxt));\n      this.userResponses.push(msgTxt);\n    }\n  }, {\n    key: \"intializeConversation\",\n    value: function intializeConversation(screen) {\n      this.screen = screen;\n      this.assistantUser = this.screen.assistantUser;\n      this.humanUser = this.screen.humanUser;\n      this.msgId = 1;\n      this.addTextMessage(qstrings.STR_GREETING_TO_USER);\n      this.addTextMessage(qstrings.STR_ASSISTANT_INTRO);\n      this.addTextMessage(qstrings.STR_ASSISTANT_MISSION);\n      this.addTextMessage(qstrings.STR_ASSISTANT_ASK_EXPLAIN);\n      this.addYesNoBtnsMsg(qstrings.STR_HUMAN_ACCEPT_EXPLAIN, qstrings.STR_HUMAN_REJECT_EXPLAIN);\n    }\n  }, {\n    key: \"addYesNoBtnsMsg\",\n    value: function addYesNoBtnsMsg(idYes, idNo) {\n      var _this = this;\n      this.screen.messageReady(new msgs.ButtonsMessage(this.msgId++, this.assistantUser, [{\n        label: this.stringsManager.getStr(qstrings.STR_YES),\n        onClick: function onClick() {\n          _this.userRespondedYes.bind(_this)(idYes);\n        }\n      }, {\n        label: this.stringsManager.getStr(qstrings.STR_NO),\n        onClick: function onClick() {\n          _this.userRespondedNo.bind(_this)(idNo);\n        }\n      }]));\n    }\n  }, {\n    key: \"userRespondedYes\",\n    value: function userRespondedYes(id) {\n      this.addUserTextMessage(id, \"\");\n      this.getResponse(id, \"\");\n    }\n  }, {\n    key: \"userRespondedNo\",\n    value: function userRespondedNo(id) {\n      this.addUserTextMessage(id, \"\");\n      this.getResponse(id, \"\");\n    }\n  }, {\n    key: \"askForExplanation\",\n    value: function askForExplanation() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_DIDNOT_UNDERSTAND);\n    }\n  }, {\n    key: \"addAppExplanation\",\n    value: function addAppExplanation() {\n      this.addTextMessage(qstrings.STR_EXPLAIN_STRT);\n      this.addTextMessage(qstrings.STR_EXPLAIN_1);\n      this.addTextMessage(qstrings.STR_EXPLAIN_2);\n      this.addTextMessage(qstrings.STR_ASSISTANT_ASK_CONTINUE);\n      this.addYesNoBtnsMsg(qstrings.STR_HUMAN_ACCEPT_EXPLAIN_MORE, qstrings.STR_HUMAN_REJECT_EXPLAIN_MORE);\n    }\n  }, {\n    key: \"addPrepQuestion\",\n    value: function addPrepQuestion(bFuture) {\n      var id = bFuture ? qstrings.STR_ASSISTANT_ASK_FORGET_FUTURE : qstrings.STR_ASSISTANT_ASK_FORGET_PAST;\n      var idY = bFuture ? qstrings.STR_HUMAN_AGREE_THEY_MAY_FORGET : qstrings.STR_HUMAN_AGREE_THEY_FORGET;\n      var idN = bFuture ? qstrings.STR_HUMAN_REJECT_THEY_MAY_FORGET : qstrings.STR_HUMAN_REJECT_THEY_FORGET;\n      this.addTextMessage(id);\n      this.addYesNoBtnsMsg(idY, idN);\n    }\n  }, {\n    key: \"addPrepQuestion2\",\n    value: function addPrepQuestion2() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_ASK_WHY_FORGET);\n      this.screen.enableUserChat(true);\n    }\n  }, {\n    key: \"explainSpacedRep\",\n    value: function explainSpacedRep() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_ANSWER_WHY_FORGET);\n      this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_SPACED_REPITION_1);\n      this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_SPACED_REPITION_2);\n      this.addTextMessage(qstrings.STR_EXPLAIN_3);\n      this.promptForAddingRevs(qstrings.STR_EXPLAIN_3);\n    }\n  }, {\n    key: \"promptForAddingRevs\",\n    value: function promptForAddingRevs(idPrev) {\n      var idPrompt = qstrings.STR_ASSISTANT_ASK_HELP_FILL;\n      var idY = qstrings.STR_HUMAN_ACCEPT_FILL;\n      var idN = qstrings.STR_HUMAN_REJECT_FILL;\n      if (idPrev == qstrings.STR_REVISION_ADDED || idPrev == qstrings.STR_REVISION_FAILED) {\n        idPrompt = qstrings.STR_ASSISTANT_ASK_HELP_FILL_AGAIN;\n        idY = qstrings.STR_HUMAN_ACCEPT_FILL_AGAIN;\n        idN = qstrings.STR_HUMAN_REJECT_FILL_AGAIN;\n      }\n      this.addTextMessage(idPrompt);\n      this.addYesNoBtnsMsg(idY, idN);\n    }\n  }, {\n    key: \"startFill\",\n    value: function startFill() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_FILL);\n      this.screen.enableUserChat(true);\n    }\n  }, {\n    key: \"continueFill\",\n    value: function continueFill() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_FILL_AGAIN);\n      this.screen.enableUserChat(true);\n    }\n  }, {\n    key: \"addHeldRevision\",\n    value: function addHeldRevision(bDivide) {\n      if (this.revToBeDivided == null) return;\n      var revs = [];\n      if (bDivide) {\n        this.addTextMessage(qstrings.STR_ASSISTANT_CONFIRM_DIVIDE_REVISION);\n        var iStrtRukuu = this.queryParser.quranInfo.getRukuuFromAyah(this.revToBeDivided.strtAyah);\n        var iEndRukuu = this.queryParser.quranInfo.getRukuuFromAyah(this.revToBeDivided.endAyah);\n        var rangeStrt = this.queryParser.quranInfo.getRukuuAyahRange(iStrtRukuu);\n        var rangeEnd = this.queryParser.quranInfo.getRukuuAyahRange(iEndRukuu);\n        var bIsAr = this.stringsManager.getLanguage() == \"ar\";\n        for (var i = iStrtRukuu + 1; i < iEndRukuu; i++) {\n          var range = this.queryParser.quranInfo.getRukuuAyahRange(i);\n          revs.push({\n            strtAyah: range[0],\n            endAyah: range[1],\n            title: this.queryParser.quranInfo.getAutoTitle(range[0], range[1], bIsAr)\n          });\n        }\n        if (revs.length == 0) {\n          revs.push(this.revToBeDivided);\n        } else {\n          if ((rangeStrt[0] + rangeStrt[1]) / 2 < this.revToBeDivided.strtAyah) {\n            revs[0].strtAyah = this.revToBeDivided.strtAyah;\n            revs[0].title = this.queryParser.quranInfo.getAutoTitle(revs[0].strtAyah, revs[0].endAyah, bIsAr);\n          } else {\n            revs.unshift({\n              strtAyah: this.revToBeDivided.strtAyah,\n              endAyah: rangeStrt[1],\n              title: this.queryParser.quranInfo.getAutoTitle(this.revToBeDivided.strtAyah, rangeStrt[1], bIsAr)\n            });\n          }\n          if ((rangeEnd[0] + rangeEnd[1]) / 2 < this.revToBeDivided.endAyah) {\n            revs[revs.length - 1].endAyah = this.revToBeDivided.endAyah;\n            revs[revs.length - 1].title = this.queryParser.quranInfo.getAutoTitle(revs[revs.length - 1].strtAyah, revs[revs.length - 1].endAyah, bIsAr);\n          } else {\n            revs.push({\n              strtAyah: this.revToBeDivided.strtAyah,\n              endAyah: rangeStrt[1],\n              title: this.queryParser.quranInfo.getAutoTitle(this.revToBeDivided.strtAyah, rangeStrt[1], bIsAr)\n            });\n          }\n        }\n      } else {\n        revs.push(this.revToBeDivided);\n      }\n      if (bDivide) {\n        this.addCustomTextMessage(this.stringsManager.getDivideRevisionSuccessMsg(revs.length));\n      }\n      for (var _i = 0; _i < revs.length; _i++) {\n        this.screen.addNewRev(revs[_i]);\n      }\n      var title = this.revToBeDivided.title;\n      this.revToBeDivided = null;\n      this.addTextMessage(qstrings.STR_REVISION_ADDED);\n      this.addCustomTextMessage(title);\n      this.promptForAddingRevs(qstrings.STR_REVISION_ADDED);\n    }\n  }, {\n    key: \"handleRevisionQuery\",\n    value: function handleRevisionQuery(text) {\n      var ret = this.queryParser.parseRevisionQuery(text);\n      if (ret != null && ret.bIsSuccess) {\n        ret.strtAyah = this.queryParser.quranInfo.getAyahGlobalIndx(ret.strtSurah, ret.strtAyah);\n        ret.endAyah = this.queryParser.quranInfo.getAyahGlobalIndx(ret.endSurah, ret.endAyah);\n        ret.title = this.queryParser.quranInfo.getAutoTitle(ret.strtAyah, ret.endAyah, this.stringsManager.getLanguage() == \"ar\");\n        var iStrtPage = this.queryParser.quranInfo.getPageFromAyah(ret.strtAyah);\n        var iEndPage = this.queryParser.quranInfo.getPageFromAyah(ret.endAyah);\n        if (iEndPage - iStrtPage > 4) {\n          this.revToBeDivided = ret;\n          this.addTextMessage(qstrings.STR_ASSISTANT_ASK_DIVIDE_REVISION);\n          this.addYesNoBtnsMsg(qstrings.STR_HUMAN_ACCEPT_DIVIDE, qstrings.STR_HUMAN_REJECT_DIVIDE);\n        } else {\n          this.screen.addNewRev(ret);\n          this.addTextMessage(qstrings.STR_REVISION_ADDED);\n          this.addCustomTextMessage(ret.title);\n          this.promptForAddingRevs(qstrings.STR_REVISION_ADDED);\n        }\n      } else {\n        this.addTextMessage(qstrings.STR_REVISION_FAILED);\n        this.promptForAddingRevs(qstrings.STR_REVISION_FAILED);\n      }\n    }\n  }, {\n    key: \"endConversation\",\n    value: function endConversation() {\n      this.addTextMessage(qstrings.STR_ASSISTANT_BYE);\n      this.screen.endConversation();\n    }\n  }, {\n    key: \"getResponse\",\n    value: function getResponse(id, strUserCustomMsg) {\n      if (id == qstrings.STR_HUMAN_ACCEPT_EXPLAIN) this.addAppExplanation();else if (id == qstrings.STR_HUMAN_REJECT_EXPLAIN) this.promptForAddingRevs(id);else if (id == qstrings.STR_HUMAN_ACCEPT_EXPLAIN_MORE) this.addPrepQuestion(false);else if (id == qstrings.STR_HUMAN_REJECT_EXPLAIN_MORE) this.promptForAddingRevs(id);else if (id == qstrings.STR_HUMAN_AGREE_THEY_FORGET) this.addPrepQuestion2();else if (id == qstrings.STR_HUMAN_REJECT_THEY_FORGET) this.addPrepQuestion(true);else if (id == qstrings.STR_HUMAN_AGREE_THEY_MAY_FORGET) this.addPrepQuestion2();else if (id == qstrings.STR_HUMAN_REJECT_THEY_MAY_FORGET) this.promptForAddingRevs(id);else if (id == qstrings.STR_HUMAN_ACCEPT_FILL) this.startFill();else if (id == qstrings.STR_HUMAN_REJECT_FILL) this.endConversation();else if (id == qstrings.STR_HUMAN_ACCEPT_FILL_AGAIN) this.continueFill();else if (id == qstrings.STR_HUMAN_REJECT_FILL_AGAIN) this.endConversation();else if (id == qstrings.STR_HUMAN_ACCEPT_DIVIDE) this.addHeldRevision(true);else if (id == qstrings.STR_HUMAN_REJECT_DIVIDE) this.addHeldRevision(false);else {\n        if (strUserCustomMsg != \"\") {\n          this.addUserTextMessage(-1, strUserCustomMsg);\n        }\n        if (this.myLastMsg == qstrings.STR_ASSISTANT_ASK_WHY_FORGET) {\n          this.explainSpacedRep();\n        }\n        if (this.myLastMsg == qstrings.STR_ASSISTANT_EXPLAIN_FILL || this.myLastMsg == qstrings.STR_ASSISTANT_EXPLAIN_FILL_AGAIN) {\n          this.handleRevisionQuery(strUserCustomMsg);\n        } else {\n          this.askForExplanation();\n          this.screen.enableUserChat(true);\n        }\n      }\n    }\n  }]);\n  return QuranicAssistant;\n}();\nexport { QuranicAssistant as default };","map":{"version":3,"names":["qstrings","QuranicAssistantStrings","msgs","SearchTextParser","allAyat","QuranicAssistant","stringsManager","myLastMsg","userResponses","assistantUser","humanUser","screen","revToBeDivided","queryParser","strMsg","messageReady","TextMessage","msgId","id","getStr","strTxt","msgTxt","push","addTextMessage","STR_GREETING_TO_USER","STR_ASSISTANT_INTRO","STR_ASSISTANT_MISSION","STR_ASSISTANT_ASK_EXPLAIN","addYesNoBtnsMsg","STR_HUMAN_ACCEPT_EXPLAIN","STR_HUMAN_REJECT_EXPLAIN","idYes","idNo","ButtonsMessage","label","STR_YES","onClick","userRespondedYes","bind","STR_NO","userRespondedNo","addUserTextMessage","getResponse","STR_ASSISTANT_DIDNOT_UNDERSTAND","STR_EXPLAIN_STRT","STR_EXPLAIN_1","STR_EXPLAIN_2","STR_ASSISTANT_ASK_CONTINUE","STR_HUMAN_ACCEPT_EXPLAIN_MORE","STR_HUMAN_REJECT_EXPLAIN_MORE","bFuture","STR_ASSISTANT_ASK_FORGET_FUTURE","STR_ASSISTANT_ASK_FORGET_PAST","idY","STR_HUMAN_AGREE_THEY_MAY_FORGET","STR_HUMAN_AGREE_THEY_FORGET","idN","STR_HUMAN_REJECT_THEY_MAY_FORGET","STR_HUMAN_REJECT_THEY_FORGET","STR_ASSISTANT_ASK_WHY_FORGET","enableUserChat","STR_ASSISTANT_ANSWER_WHY_FORGET","STR_ASSISTANT_EXPLAIN_SPACED_REPITION_1","STR_ASSISTANT_EXPLAIN_SPACED_REPITION_2","STR_EXPLAIN_3","promptForAddingRevs","idPrev","idPrompt","STR_ASSISTANT_ASK_HELP_FILL","STR_HUMAN_ACCEPT_FILL","STR_HUMAN_REJECT_FILL","STR_REVISION_ADDED","STR_REVISION_FAILED","STR_ASSISTANT_ASK_HELP_FILL_AGAIN","STR_HUMAN_ACCEPT_FILL_AGAIN","STR_HUMAN_REJECT_FILL_AGAIN","STR_ASSISTANT_EXPLAIN_FILL","STR_ASSISTANT_EXPLAIN_FILL_AGAIN","bDivide","revs","STR_ASSISTANT_CONFIRM_DIVIDE_REVISION","iStrtRukuu","quranInfo","getRukuuFromAyah","strtAyah","iEndRukuu","endAyah","rangeStrt","getRukuuAyahRange","rangeEnd","bIsAr","getLanguage","i","range","title","getAutoTitle","length","unshift","addCustomTextMessage","getDivideRevisionSuccessMsg","addNewRev","text","ret","parseRevisionQuery","bIsSuccess","getAyahGlobalIndx","strtSurah","endSurah","iStrtPage","getPageFromAyah","iEndPage","STR_ASSISTANT_ASK_DIVIDE_REVISION","STR_HUMAN_ACCEPT_DIVIDE","STR_HUMAN_REJECT_DIVIDE","STR_ASSISTANT_BYE","endConversation","strUserCustomMsg","addAppExplanation","addPrepQuestion","addPrepQuestion2","startFill","continueFill","addHeldRevision","explainSpacedRep","handleRevisionQuery","askForExplanation"],"sources":["C:/Users/Tysseer Harak/Desktop/Data/Code/React Native/Dawem/app/js/helpers/QuranicAssistant.js"],"sourcesContent":["import * as qstrings from \"./QuranicAssistantStrings\";\r\nimport QuranicAssistantStrings from \"./QuranicAssistantStrings\";\r\nimport * as msgs from \"./Messages\";\r\nimport SearchTextParser from \"./SearchTextParser\";\r\nimport allAyat from \"./quranAyat\";\r\nexport default class QuranicAssistant {\r\n  constructor() {\r\n    this.stringsManager = new QuranicAssistantStrings();\r\n    // to do: define a map for each entry point and then do lookup to respond\r\n    this.myLastMsg = -1;\r\n    this.userResponses = []; //array of object UserResponse (myMsg,strUserTxt)\r\n    this.assistantUser = null;\r\n    this.humanUser = null;\r\n    this.screen = null;\r\n    this.revToBeDivided = null; //used in case of dividing the revision the user input\r\n    this.queryParser = new SearchTextParser();\r\n  }\r\n  addCustomTextMessage(strMsg) {\r\n    this.screen.messageReady(\r\n      new msgs.TextMessage(this.msgId++, this.assistantUser, strMsg)\r\n    );\r\n  }\r\n  addTextMessage(id) {\r\n    this.screen.messageReady(\r\n      new msgs.TextMessage(\r\n        this.msgId++,\r\n        this.assistantUser,\r\n        this.stringsManager.getStr(id)\r\n      )\r\n    );\r\n    this.myLastMsg = id;\r\n  }\r\n  addUserTextMessage(id, strTxt) {\r\n    let msgTxt = id > 0 ? this.stringsManager.getStr(id) : strTxt;\r\n    this.screen.messageReady(\r\n      new msgs.TextMessage(this.msgId++, this.humanUser, msgTxt)\r\n    );\r\n    this.userResponses.push(msgTxt);\r\n  }\r\n  intializeConversation(screen) {\r\n    this.screen = screen;\r\n    this.assistantUser = this.screen.assistantUser;\r\n    this.humanUser = this.screen.humanUser;\r\n    this.msgId = 1;\r\n\r\n    this.addTextMessage(qstrings.STR_GREETING_TO_USER);\r\n\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_INTRO);\r\n\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_MISSION);\r\n\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_ASK_EXPLAIN);\r\n\r\n    this.addYesNoBtnsMsg(\r\n      qstrings.STR_HUMAN_ACCEPT_EXPLAIN,\r\n      qstrings.STR_HUMAN_REJECT_EXPLAIN\r\n    );\r\n  }\r\n  addYesNoBtnsMsg(idYes, idNo) {\r\n    this.screen.messageReady(\r\n      new msgs.ButtonsMessage(this.msgId++, this.assistantUser, [\r\n        {\r\n          label: this.stringsManager.getStr(qstrings.STR_YES),\r\n          onClick: () => {\r\n            this.userRespondedYes.bind(this)(idYes);\r\n          },\r\n        },\r\n        {\r\n          label: this.stringsManager.getStr(qstrings.STR_NO),\r\n          onClick: () => {\r\n            this.userRespondedNo.bind(this)(idNo);\r\n          },\r\n        },\r\n      ])\r\n    );\r\n  }\r\n  userRespondedYes(id) {\r\n    this.addUserTextMessage(id, \"\");\r\n    this.getResponse(id, \"\");\r\n  }\r\n  userRespondedNo(id) {\r\n    this.addUserTextMessage(id, \"\");\r\n    this.getResponse(id, \"\");\r\n  }\r\n\r\n  askForExplanation() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_DIDNOT_UNDERSTAND);\r\n  }\r\n  addAppExplanation() {\r\n    this.addTextMessage(qstrings.STR_EXPLAIN_STRT);\r\n    this.addTextMessage(qstrings.STR_EXPLAIN_1);\r\n    this.addTextMessage(qstrings.STR_EXPLAIN_2);\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_ASK_CONTINUE);\r\n\r\n    this.addYesNoBtnsMsg(\r\n      qstrings.STR_HUMAN_ACCEPT_EXPLAIN_MORE,\r\n      qstrings.STR_HUMAN_REJECT_EXPLAIN_MORE\r\n    );\r\n  }\r\n  addPrepQuestion(bFuture) {\r\n    let id = bFuture\r\n      ? qstrings.STR_ASSISTANT_ASK_FORGET_FUTURE\r\n      : qstrings.STR_ASSISTANT_ASK_FORGET_PAST;\r\n    let idY = bFuture\r\n      ? qstrings.STR_HUMAN_AGREE_THEY_MAY_FORGET\r\n      : qstrings.STR_HUMAN_AGREE_THEY_FORGET;\r\n    let idN = bFuture\r\n      ? qstrings.STR_HUMAN_REJECT_THEY_MAY_FORGET\r\n      : qstrings.STR_HUMAN_REJECT_THEY_FORGET;\r\n    this.addTextMessage(id);\r\n\r\n    this.addYesNoBtnsMsg(idY, idN);\r\n  }\r\n  addPrepQuestion2() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_ASK_WHY_FORGET);\r\n    this.screen.enableUserChat(true);\r\n  }\r\n  explainSpacedRep() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_ANSWER_WHY_FORGET);\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_SPACED_REPITION_1);\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_SPACED_REPITION_2);\r\n    this.addTextMessage(qstrings.STR_EXPLAIN_3);\r\n    this.promptForAddingRevs(qstrings.STR_EXPLAIN_3);\r\n  }\r\n  promptForAddingRevs(idPrev) {\r\n    let idPrompt = qstrings.STR_ASSISTANT_ASK_HELP_FILL;\r\n    let idY = qstrings.STR_HUMAN_ACCEPT_FILL;\r\n    let idN = qstrings.STR_HUMAN_REJECT_FILL;\r\n    if (\r\n      idPrev == qstrings.STR_REVISION_ADDED ||\r\n      idPrev == qstrings.STR_REVISION_FAILED\r\n    ) {\r\n      idPrompt = qstrings.STR_ASSISTANT_ASK_HELP_FILL_AGAIN;\r\n      idY = qstrings.STR_HUMAN_ACCEPT_FILL_AGAIN;\r\n      idN = qstrings.STR_HUMAN_REJECT_FILL_AGAIN;\r\n    }\r\n    this.addTextMessage(idPrompt);\r\n\r\n    this.addYesNoBtnsMsg(idY, idN);\r\n  }\r\n  startFill() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_FILL);\r\n    this.screen.enableUserChat(true);\r\n  }\r\n  continueFill() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_EXPLAIN_FILL_AGAIN);\r\n    this.screen.enableUserChat(true);\r\n  }\r\n  addHeldRevision(bDivide) {\r\n    if (this.revToBeDivided == null) return;\r\n    let revs = [];\r\n    if (bDivide) {\r\n      this.addTextMessage(qstrings.STR_ASSISTANT_CONFIRM_DIVIDE_REVISION);\r\n\r\n      // divide pages by Rukuu\r\n      let iStrtRukuu = this.queryParser.quranInfo.getRukuuFromAyah(\r\n        this.revToBeDivided.strtAyah\r\n      );\r\n\r\n      let iEndRukuu = this.queryParser.quranInfo.getRukuuFromAyah(\r\n        this.revToBeDivided.endAyah\r\n      );\r\n      let rangeStrt = this.queryParser.quranInfo.getRukuuAyahRange(iStrtRukuu);\r\n      let rangeEnd = this.queryParser.quranInfo.getRukuuAyahRange(iEndRukuu);\r\n      let bIsAr = this.stringsManager.getLanguage() == \"ar\";\r\n\r\n      for (let i = iStrtRukuu + 1; i < iEndRukuu; i++) {\r\n        let range = this.queryParser.quranInfo.getRukuuAyahRange(i);\r\n        revs.push({\r\n          strtAyah: range[0],\r\n          endAyah: range[1],\r\n          title: this.queryParser.quranInfo.getAutoTitle(\r\n            range[0],\r\n            range[1],\r\n            bIsAr\r\n          ),\r\n        });\r\n      }\r\n      if (revs.length == 0) {\r\n        revs.push(this.revToBeDivided);\r\n      } else {\r\n        if ((rangeStrt[0] + rangeStrt[1]) / 2 < this.revToBeDivided.strtAyah) {\r\n          // don't add it , join it to first rev\r\n          revs[0].strtAyah = this.revToBeDivided.strtAyah;\r\n          revs[0].title = this.queryParser.quranInfo.getAutoTitle(\r\n            revs[0].strtAyah,\r\n            revs[0].endAyah,\r\n            bIsAr\r\n          );\r\n        } else {\r\n          revs.unshift({\r\n            strtAyah: this.revToBeDivided.strtAyah,\r\n            endAyah: rangeStrt[1],\r\n            title: this.queryParser.quranInfo.getAutoTitle(\r\n              this.revToBeDivided.strtAyah,\r\n              rangeStrt[1],\r\n              bIsAr\r\n            ),\r\n          });\r\n        }\r\n\r\n        if ((rangeEnd[0] + rangeEnd[1]) / 2 < this.revToBeDivided.endAyah) {\r\n          // don't add it , join it to last rev\r\n          revs[revs.length - 1].endAyah = this.revToBeDivided.endAyah;\r\n          revs[revs.length - 1].title = this.queryParser.quranInfo.getAutoTitle(\r\n            revs[revs.length - 1].strtAyah,\r\n            revs[revs.length - 1].endAyah,\r\n            bIsAr\r\n          );\r\n        } else {\r\n          revs.push({\r\n            strtAyah: this.revToBeDivided.strtAyah,\r\n            endAyah: rangeStrt[1],\r\n            title: this.queryParser.quranInfo.getAutoTitle(\r\n              this.revToBeDivided.strtAyah,\r\n              rangeStrt[1],\r\n              bIsAr\r\n            ),\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      revs.push(this.revToBeDivided);\r\n    }\r\n    if (bDivide) {\r\n      this.addCustomTextMessage(\r\n        this.stringsManager.getDivideRevisionSuccessMsg(revs.length)\r\n      );\r\n    }\r\n    for (let i = 0; i < revs.length; i++) {\r\n      this.screen.addNewRev(revs[i]);\r\n    }\r\n    let title = this.revToBeDivided.title;\r\n    this.revToBeDivided = null;\r\n    this.addTextMessage(qstrings.STR_REVISION_ADDED);\r\n    this.addCustomTextMessage(title);\r\n    this.promptForAddingRevs(qstrings.STR_REVISION_ADDED);\r\n  }\r\n\r\n  handleRevisionQuery(text) {\r\n    var ret = this.queryParser.parseRevisionQuery(text);\r\n    if (ret != null && ret.bIsSuccess) {\r\n      ret.strtAyah = this.queryParser.quranInfo.getAyahGlobalIndx(\r\n        ret.strtSurah,\r\n        ret.strtAyah\r\n      );\r\n      ret.endAyah = this.queryParser.quranInfo.getAyahGlobalIndx(\r\n        ret.endSurah,\r\n        ret.endAyah\r\n      );\r\n      ret.title = this.queryParser.quranInfo.getAutoTitle(\r\n        ret.strtAyah,\r\n        ret.endAyah,\r\n        this.stringsManager.getLanguage() == \"ar\"\r\n      ); // or text?\r\n      let iStrtPage = this.queryParser.quranInfo.getPageFromAyah(ret.strtAyah);\r\n      let iEndPage = this.queryParser.quranInfo.getPageFromAyah(ret.endAyah);\r\n      if (iEndPage - iStrtPage > 4) {\r\n        this.revToBeDivided = ret;\r\n        this.addTextMessage(qstrings.STR_ASSISTANT_ASK_DIVIDE_REVISION);\r\n        this.addYesNoBtnsMsg(\r\n          qstrings.STR_HUMAN_ACCEPT_DIVIDE,\r\n          qstrings.STR_HUMAN_REJECT_DIVIDE\r\n        );\r\n      } else {\r\n        this.screen.addNewRev(ret);\r\n        this.addTextMessage(qstrings.STR_REVISION_ADDED);\r\n        this.addCustomTextMessage(ret.title);\r\n        this.promptForAddingRevs(qstrings.STR_REVISION_ADDED);\r\n      }\r\n    } else {\r\n      this.addTextMessage(qstrings.STR_REVISION_FAILED);\r\n      this.promptForAddingRevs(qstrings.STR_REVISION_FAILED);\r\n    }\r\n  }\r\n  endConversation() {\r\n    this.addTextMessage(qstrings.STR_ASSISTANT_BYE);\r\n    this.screen.endConversation();\r\n  }\r\n\r\n  getResponse(id, strUserCustomMsg) {\r\n    if (id == qstrings.STR_HUMAN_ACCEPT_EXPLAIN) this.addAppExplanation();\r\n    else if (id == qstrings.STR_HUMAN_REJECT_EXPLAIN)\r\n      this.promptForAddingRevs(id);\r\n    else if (id == qstrings.STR_HUMAN_ACCEPT_EXPLAIN_MORE)\r\n      this.addPrepQuestion(false); //did you forget\r\n    else if (id == qstrings.STR_HUMAN_REJECT_EXPLAIN_MORE)\r\n      this.promptForAddingRevs(id);\r\n    else if (id == qstrings.STR_HUMAN_AGREE_THEY_FORGET)\r\n      this.addPrepQuestion2(); // why do we forget\r\n    else if (id == qstrings.STR_HUMAN_REJECT_THEY_FORGET)\r\n      this.addPrepQuestion(true);\r\n    else if (id == qstrings.STR_HUMAN_AGREE_THEY_MAY_FORGET)\r\n      this.addPrepQuestion2();\r\n    else if (id == qstrings.STR_HUMAN_REJECT_THEY_MAY_FORGET)\r\n      this.promptForAddingRevs(id);\r\n    else if (id == qstrings.STR_HUMAN_ACCEPT_FILL) this.startFill();\r\n    else if (id == qstrings.STR_HUMAN_REJECT_FILL) this.endConversation();\r\n    else if (id == qstrings.STR_HUMAN_ACCEPT_FILL_AGAIN) this.continueFill();\r\n    else if (id == qstrings.STR_HUMAN_REJECT_FILL_AGAIN) this.endConversation();\r\n    else if (id == qstrings.STR_HUMAN_ACCEPT_DIVIDE) this.addHeldRevision(true);\r\n    else if (id == qstrings.STR_HUMAN_REJECT_DIVIDE)\r\n      this.addHeldRevision(false);\r\n    else {\r\n      if (strUserCustomMsg != \"\") {\r\n        this.addUserTextMessage(-1, strUserCustomMsg);\r\n      }\r\n      if (this.myLastMsg == qstrings.STR_ASSISTANT_ASK_WHY_FORGET) {\r\n        this.explainSpacedRep();\r\n      }\r\n      if (\r\n        this.myLastMsg == qstrings.STR_ASSISTANT_EXPLAIN_FILL ||\r\n        this.myLastMsg == qstrings.STR_ASSISTANT_EXPLAIN_FILL_AGAIN\r\n      ) {\r\n        this.handleRevisionQuery(strUserCustomMsg);\r\n      } else {\r\n        this.askForExplanation();\r\n        this.screen.enableUserChat(true);\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}